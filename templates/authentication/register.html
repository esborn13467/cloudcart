{% extends 'authentication/base.html' %}

{% block title %}
    Register
{% endblock %}
{% block content %}
    <div class="wrap-login100">
        <form class="login100-form validate-form" method="POST" action="register" id="signupForm">
            {% csrf_token %}
            <span class="login100-form-logo">
						<i class="zmdi zmdi-landscape"></i>
					</span>

            <span class="login100-form-title p-b-10 p-t-10">
						Register
					</span>
            {% if form.errors %}
                <div class="alert alert-d anger">
                    <strong>{{ form.errors }}</strong>
                </div>
            {% endif %}
            <div class="wrap-input100 validate-input" data-validate="Enter username">
                <input class="input100" type="text" name="username" placeholder="Username">
                <span class="focus-input100" data-placeholder="&#xf207;"></span>
            </div>

            <div class="wrap-input100 validate-input" data-validate="Enter email">
                <input class="input100" type="email" name="email" placeholder="Email">
                <span class="focus-input100" data-placeholder="&#xf207;"></span>
            </div>

            <div class="wrap-input100 validate-input" data-validate="Enter password">
                <input class="input100" type="password" name="password1" placeholder="Password">
                <span class="focus-input100" data-placeholder="&#xf191;"></span>
            </div>

            <div class="wrap-input100 validate-input" data-validate="Enter password">
                <input class="input100" type="password" name="password2" placeholder="Confirm Password">
                <span class="focus-input100" data-placeholder="&#xf191;"></span>
            </div>

            <div class="contact100-form-checkbox">
                <input class="input-checkbox100" id="ckb1" type="checkbox" name="remember-me">
                <label class="label-checkbox100" for="ckb1">
                    Remember me
                </label>
            </div>

            <div class="container-login100-form-btn">
                <button type="submit" class="login100-form-btn">
                    Register
                </button>
            </div>

            <div class="text-center p-t-10">
                <a class="txt1" href="{% url 'userauths:login' %}">
                    Already have an account? Click here to login
                </a>
            </div>
        </form>
    </div>
    </div>
    </div>
    {#{{ form }}#}

    <div id="dropDownSelect1"></div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Add a submit event listener to the sign-up form to validate the password before submission
            document.getElementById('signupForm').addEventListener('submit', function (event) {
                // Retrieve the values of the password and username input fields
                let password = document.querySelector('input[name="password1"]').value;
                let username = document.querySelector('input[name="username"]').value;

                // Check if the pass word meets the requirements
                let errors = [];
                if (password.length < 8) {
                    errors.push('Password must be at least 8 characters long.');
                }
                if (password.toLowerCase().includes(username.toLowerCase())) {
                    errors.push('Password is too similar to the username.');
                }
                if (/^\d+$/.test(password)) {
                    errors.push('Password cannot be entirely numeric.');
                }
                // Add more common password checks if needed

                // If there are any errors, alert the user and prevent form submission
                if (errors.length > 0) {
                    alert(errors.join('\n'));
                    event.preventDefault();
                }
            });
        });
    </script>
{% endblock %}